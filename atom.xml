<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ryan&#39;s Blog</title>
  
  
  <link href="https://www.ryanamigo.com/atom.xml" rel="self"/>
  
  <link href="https://www.ryanamigo.com/"/>
  <updated>2023-11-20T00:48:58.532Z</updated>
  <id>https://www.ryanamigo.com/</id>
  
  <author>
    <name>Ryan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>design-pattern</title>
    <link href="https://www.ryanamigo.com/2023/11/18/design-pattern/"/>
    <id>https://www.ryanamigo.com/2023/11/18/design-pattern/</id>
    <published>2023-11-18T14:58:39.000Z</published>
    <updated>2023-11-20T00:48:58.532Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>UI设计基本理论学习</title>
    <link href="https://www.ryanamigo.com/2023/11/15/ui-design/"/>
    <id>https://www.ryanamigo.com/2023/11/15/ui-design/</id>
    <published>2023-11-15T15:43:14.000Z</published>
    <updated>2023-11-20T00:48:58.532Z</updated>
    
    <content type="html"><![CDATA[<h1 id="优秀设计特点"><a href="#优秀设计特点" class="headerlink" title="优秀设计特点"></a>优秀设计特点</h1><ol><li>色彩的使用，颜色简洁直观富有含义，强调“刚好”的程度，突出重点信息 ，不乱用色彩。</li><li>优质的配图，图片需要突出商品的品质，给予用户信赖感，有情感有意境。一张好的图片，更能突出整个设计的气质。</li><li>一目了然的信息，设计的目的是传达信息给到用户，主次分明，突出核心吸引点，注重信息传递效率</li><li>设计品质，是否经的起推敲，是否有可描述的内涵，能否把产品的品牌感情传达给用户</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;优秀设计特点&quot;&gt;&lt;a href=&quot;#优秀设计特点&quot; class=&quot;headerlink&quot; title=&quot;优秀设计特点&quot;&gt;&lt;/a&gt;优秀设计特点&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;色彩的使用，颜色简洁直观富有含义，强调“刚好”的程度，突出重点信息 ，不乱用色彩。&lt;/li&gt;
&lt;</summary>
      
    
    
    
    <category term="笔记" scheme="https://www.ryanamigo.com/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="UI" scheme="https://www.ryanamigo.com/tags/UI/"/>
    
  </entry>
  
  <entry>
    <title>esxi开启sata和usb直通</title>
    <link href="https://www.ryanamigo.com/2023/09/03/esxi-sync-device/"/>
    <id>https://www.ryanamigo.com/2023/09/03/esxi-sync-device/</id>
    <published>2023-09-03T20:30:20.000Z</published>
    <updated>2023-11-20T00:48:58.532Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oss.ryanamigo.com/blog/esxi-1.png" alt="image.png"><br>上图已经开启了sata和use的直通，默认情况下，无法开启sata和usb直通，需要修改配置文件，修改方式如下</p><h2 id="开启esxi的ssh"><a href="#开启esxi的ssh" class="headerlink" title="开启esxi的ssh"></a>开启esxi的ssh</h2><p><img src="http://oss.ryanamigo.com/blog/esxi-2.png" alt="image.png"><br>开启后，我们就可以通过终端访问esxi系统了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh root@192.168.124.3</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">替换为自己的ip</span></span><br></pre></td></tr></table></figure><p><img src="http://oss.ryanamigo.com/blog/esxi-3.png" alt="image.png"></p><p>esxi内置vi编辑器，可以修改配置文件，我们需要修改的文件是<code>/etc/vmware/passthru.map</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/vmware</span><br><span class="line">vi passthru.map</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>翻到最底部，可以看到如下内容</p><p><img src="http://oss.ryanamigo.com/blog/esxi-4.png" alt="image.png"></p><p>然后看网页端控制台<br><img src="http://oss.ryanamigo.com/blog/esxi-5.png" alt="image.png"></p><h2 id="开启usb直通"><a href="#开启usb直通" class="headerlink" title="开启usb直通"></a>开启usb直通</h2><p>点击<code>usb controller</code>，我们重点关注<code>设备ID</code>和<code>供应商ID</code>，在<code>passthru.map</code>文件中填写这两个值，不用填写<code>0x</code>,填写方式如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">供应商ID  设备ID  d3d0  default</span><br></pre></td></tr></table></figure><h2 id="开启sata直通"><a href="#开启sata直通" class="headerlink" title="开启sata直通"></a>开启sata直通</h2><p>同理，点击<code>SATA controller</code>，填写方式如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">供应商ID  设备ID  d3d0  false</span><br></pre></td></tr></table></figure><p><strong>注意，sata这里，后面填写的是false</strong></p><p>填写完后保存，重启esxi系统，就可以开启直通了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;http://oss.ryanamigo.com/blog/esxi-1.png&quot; alt=&quot;image.png&quot;&gt;&lt;br&gt;上图已经开启了sata和use的直通，默认情况下，无法开启sata和usb直通，需要修改配置文件，修改方式如下&lt;/p&gt;
&lt;h2 i</summary>
      
    
    
    
    <category term="家用服务器" scheme="https://www.ryanamigo.com/categories/%E5%AE%B6%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
    <category term="esxi" scheme="https://www.ryanamigo.com/tags/esxi/"/>
    
  </entry>
  
  <entry>
    <title>科目一笔记</title>
    <link href="https://www.ryanamigo.com/2023/09/02/driving-license-1/"/>
    <id>https://www.ryanamigo.com/2023/09/02/driving-license-1/</id>
    <published>2023-09-02T09:23:12.000Z</published>
    <updated>2023-11-20T00:48:58.532Z</updated>
    
    <content type="html"><![CDATA[<p>科目一冲刺笔记</p><span id="more"></span><h2 id="驾驶证相关考点"><a href="#驾驶证相关考点" class="headerlink" title="驾驶证相关考点"></a>驾驶证相关考点</h2><ol><li>驾驶证有效期 6年-10年-长期</li><li>小型汽车驾照年龄要求 18-无上限</li><li>大、中、客货司机每年体检，其他人不需要，<strong>只要提到每两年体检的都是错的</strong></li><li>关于时间：满9变3（技巧：有90选90，没90选30，判断题出现30或三十绝大多数都是对的）</li><li>满分学习 现场2天，网络3天，自主两天</li><li>学法减分 网络30分钟1分  现场1小时2分  公益1小时1分， 每个周期最多6分；酒驾3个周期内不能参加，实习期的不能参加</li><li>出现科目二&#x2F;科目三字眼，题目中<strong>没有分数</strong>的判断题都是对的，<strong>有分数</strong>的判断题都是错的</li><li>行为前面找<strong>违法</strong></li><li>责任面前找<strong>刑事</strong>或<strong>全部</strong>  刑事责任 全部责任</li><li>车登记，证随意，车架、发动机、颜色变了要登记；加防撞不用登记</li><li><strong>被注销 被吊销</strong>正确，<strong>不注销 不吊销</strong>错误</li><li>看到<strong>安全法律、法规</strong>直接选</li><li>不得申请驾驶证：<strong>假1骗3毒3醉5逃罪终生</strong>，其中，作弊&#x3D;假 不正当&#x3D;骗</li></ol><h2 id="车辆知识"><a href="#车辆知识" class="headerlink" title="车辆知识"></a>车辆知识</h2><p>1.车道偏离(LDW) 自动巡航(ACC)</p><h2 id="拘留扣留问题"><a href="#拘留扣留问题" class="headerlink" title="拘留扣留问题"></a>拘留扣留问题</h2><ol><li>扣留扣车选择题的5种情况 两证两标一牌(驾驶证、行驶证，保险标志、检验合格标志，车牌)</li><li>扣留判断题技巧：只有两种情况是错的，其余全正确。<br> 错误情况：扣留行驶证、没带身份证</li><li>拘留技巧：跟钱在一起的拘留就是对的，没有钱的拘留就是错的。</li></ol><h2 id="判刑问题"><a href="#判刑问题" class="headerlink" title="判刑问题"></a>判刑问题</h2><ol><li>7个字：拘役&#x2F;刑&#x2F;且&#x2F;组织&#x2F;因</li></ol><ul><li>有拘役优先选拘役，有拘役就是对的</li><li>遇到<strong>有期徒刑结尾</strong>的判断题就是错的</li><li><strong>且</strong>和<strong>组织作弊</strong>的找3-7</li><li><strong>因</strong>找7以上</li></ul><h2 id="事故处理"><a href="#事故处理" class="headerlink" title="事故处理"></a>事故处理</h2><ol><li>有争议、有人员伤亡、有喝酒司机、有违法行为都是立刻报警，判断题有<strong>报警</strong>就是对的</li><li>我无争议、无人员伤亡，撤离现场自行协商，如果警察到了，责令撤离罚款200</li></ol><h2 id="速度"><a href="#速度" class="headerlink" title="速度"></a>速度</h2><ol><li><p>只要不是普通道路，特殊道路都是30公里&#x2F;小时</p></li><li><p>判断题中出现xx公里&#x2F;小时，数字不是30或100，就是错的</p></li><li><p>高速公路能见度问题 口诀 261 145 52离</p><table><thead><tr><th>能见度</th><th>速度</th><th>车距</th></tr></thead><tbody><tr><td>200m</td><td>60km&#x2F;h</td><td>100m</td></tr><tr><td>100m</td><td>40km&#x2F;h</td><td>50m</td></tr><tr><td>50m</td><td>20km&#x2F;h</td><td>尽快驶离</td></tr></tbody></table></li><li><p>高速限速</p><ul><li><p>三条车道<br> | 11-12 | 9-11  | 6-9 |</p></li><li><p>两条车道<br> | 10-12 | 6-10 |</p></li></ul></li><li><p>城市&#x2F;公路限速</p></li></ol><ul><li>有中心线 城3公4</li><li>没有中心线 城5公7</li></ul><h2 id="记分"><a href="#记分" class="headerlink" title="记分"></a>记分</h2><ol><li><p>超速<br>  小车 普通路 20%-50% 3分<br>  小车 普通路 50%以上 6分<br>  小车 高速路 20%-50% 6分<br>  小车 高速路 50%以上 12分</p></li><li><p>超员<br>  <strong>大汽车 20%以上 12分</strong><br>  大汽车 20%以下 6分<br>  <strong>7座车 50%-100% 9分</strong><br>  7座车 50%以下 6分<br>  <strong>小车 100% 12分</strong><br>  小车 50%-100% 6分<br>  小车 20%-50% 3分</p></li><li><p>超载<br>  载货30%以下1分，30%以上3分</p></li><li><p>1分<br>未车检找1，会车&#x2F;调头&#x2F;倒车找1，禁令找1，灯光找1，安全带找1，长宽高找1，擅自找1，头盔找1</p></li><li><p>3分<br>打电话找3，警告找3，普逆找3，穿插找3，不让找3，安装找3，校车安全找3，低低找3，</p></li><li><p>6分<br>应急车道6，扣留期间6，闯红灯6，轻伤&#x2F;无伤逃逸6，品找6</p></li><li><p>9分<br>违法停车找9，未挂牌&#x2F;遮挡牌找9，准驾车型不符找9，校车资格找9，违反420法则找9，</p></li><li><p>12分<br>酒驾找12，使用其他号牌找12，逃逸死亡重伤12，高逆12，代替&#x2F;买卖分找12</p></li></ol><h2 id="罚款"><a href="#罚款" class="headerlink" title="罚款"></a>罚款</h2><ol><li><p>只要问到xx处罚xx处理，1罚2吊，罚款吊销<strong>驾驶证</strong>（罚款20元不选，例外：实习期单独上高速，补领机动车驾驶证）</p></li><li><p>未按规定xxx&#x2F;未及时xxx，罚200</p></li><li><p>贿赂舞弊罚2000</p></li><li><p>买卖分 3倍5万元罚款，组织买卖分，5倍10万元罚款</p></li><li><p>作假：学习找1000，假资格找500</p></li><li><p>“组织”开头的题，要么2万要么10万</p></li><li><p>逾期找250，非法、逃逸、私自改装2个2(200-2000)</p></li></ol><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>醉酒和饮酒同时出现选饮酒</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;科目一冲刺笔记&lt;/p&gt;</summary>
    
    
    
    <category term="其他" scheme="https://www.ryanamigo.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="驾照" scheme="https://www.ryanamigo.com/tags/%E9%A9%BE%E7%85%A7/"/>
    
  </entry>
  
  <entry>
    <title>常用但容易忘记的命令</title>
    <link href="https://www.ryanamigo.com/2023/07/19/comm-use-command/"/>
    <id>https://www.ryanamigo.com/2023/07/19/comm-use-command/</id>
    <published>2023-07-19T22:43:34.000Z</published>
    <updated>2023-11-20T00:48:58.532Z</updated>
    
    <content type="html"><![CDATA[<p>记录常用命令，忘了也不用到处找</p><span id="more"></span><h2 id="docker相关"><a href="#docker相关" class="headerlink" title="docker相关"></a>docker相关</h2><ul><li><p>把当前用户加入docker组，无需sudo</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker $(whoami) &amp;&amp; sudo chmod a+rw /var/run/docker.sock</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试</span></span><br><span class="line">docker info</span><br><span class="line"> </span><br></pre></td></tr></table></figure></li><li><p>删除tag为none的镜像</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images | grep none | awk &#x27;&#123;print $3&#125;&#x27; | xargs docker rmi</span><br></pre></td></tr></table></figure></li><li><p>修改当前目录下的所有文件的权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R 755 ./</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;记录常用命令，忘了也不用到处找&lt;/p&gt;</summary>
    
    
    
    <category term="笔记" scheme="https://www.ryanamigo.com/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="命令行" scheme="https://www.ryanamigo.com/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"/>
    
  </entry>
  
  <entry>
    <title>react组件的S.O.L.I.D原则</title>
    <link href="https://www.ryanamigo.com/2023/07/16/react-solid-principle/"/>
    <id>https://www.ryanamigo.com/2023/07/16/react-solid-principle/</id>
    <published>2023-07-16T10:38:32.000Z</published>
    <updated>2023-11-20T00:48:58.532Z</updated>
    
    <content type="html"><![CDATA[<p>没有组件封装的react，一定是屎山代码。<br>react组件五个原则</p><ul><li>Single Responsibility 单一职责</li><li>Open-Closed 开闭原则</li><li>Liskov Subsitution 里氏替换</li><li>Interface Segregation 接口分离</li><li>Dependency Inversion 依赖倒转</li></ul><span id="more"></span><h2 id="单一职责"><a href="#单一职责" class="headerlink" title="单一职责"></a>单一职责</h2><p>一个组件&#x2F;方法，只做一件事情。</p><h3 id="反面案例"><a href="#反面案例" class="headerlink" title="反面案例"></a>反面案例</h3><p>很多人写react时候，时这样写的，所有的逻辑功能都放在一个文件中，导致其他人看这段代码时很头疼，要上下来回翻找。<br>功能很简单，就是按照评价等级筛选商品。</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useMemo, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Product</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./product&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Rating</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-simple-star-rating&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Bad</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [products, setProducts] = <span class="title function_">useState</span>([]);</span><br><span class="line">  <span class="keyword">const</span> [filterRate, setFilterRate] = <span class="title function_">useState</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">fetchProducts</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">get</span>(</span><br><span class="line">      <span class="string">&quot;https://fakestoreapi.com/products&quot;</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (response &amp;&amp; response.<span class="property">data</span>) <span class="title function_">setProducts</span>(response.<span class="property">data</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">fetchProducts</span>();</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleRating</span> = (<span class="params">rate: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setFilterRate</span>(rate);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> filteredProducts = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span></span><br><span class="line">      products.<span class="title function_">filter</span>(</span><br><span class="line">        <span class="function">(<span class="params">product: <span class="built_in">any</span></span>) =&gt;</span> product.<span class="property">rating</span>.<span class="property">rate</span> &gt; filterRate</span><br><span class="line">      ),</span><br><span class="line">    [products, filterRate]</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col h-full&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col justify-center items-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;font-semibold&quot;</span>&gt;</span>Minimum Rating <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Rating</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">initialValue</span>=<span class="string">&#123;filterRate&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">SVGclassName</span>=<span class="string">&quot;inline-block&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onClick</span>=<span class="string">&#123;handleRating&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;h-full flex flex-wrap justify-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;filteredProducts.map((product: any) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;w-56 flex flex-col items-center m-2 max-w-sm bg-white rounded-lg shadow-md dark:bg-gray-800 dark:border-gray-700&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">className</span>=<span class="string">&quot;p-8 rounded-t-lg h-48&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">src</span>=<span class="string">&#123;product.image&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">alt</span>=<span class="string">&quot;product image&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col px-5 pb-5&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h5</span> <span class="attr">className</span>=<span class="string">&quot;text-lg font-semibold tracking-tight text-gray-900 dark:text-white&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  &#123;product.title&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex items-center mt-2.5 mb-5 flex-1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;Array(parseInt(product.rating.rate))</span></span><br><span class="line"><span class="language-xml">                  .fill(&quot;&quot;)</span></span><br><span class="line"><span class="language-xml">                  .map((_, idx) =&gt; (</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">svg</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                      <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                      <span class="attr">className</span>=<span class="string">&quot;w-5 h-5 text-yellow-300&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                      <span class="attr">fill</span>=<span class="string">&quot;currentColor&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                      <span class="attr">viewBox</span>=<span class="string">&quot;0 0 20 20&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                      <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    &gt;</span></span></span><br><span class="line"><span class="language-xml">                      <span class="tag">&lt;<span class="name">title</span>&gt;</span>First star<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                      <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  ))&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;bg-blue-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800 ml-3&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  &#123;parseInt(product.rating.rate)&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col items-between justify-around&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;text-2xl font-bold text-gray-900 dark:text-white&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  $&#123;product.price&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">a</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">href</span>=<span class="string">&quot;#&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">className</span>=<span class="string">&quot;text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  // <span class="attr">onClick</span>=<span class="string">&#123;onAddToCart&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                &gt;</span></span></span><br><span class="line"><span class="language-xml">                  Add to cart</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上面的例子中，有如下功能</p><ol><li>获取商品列表</li><li>展示商品列表</li><li>星级评价</li><li>按星级评价筛选</li></ol><p>那就把这四个功能一一拆分</p><p>当我们的代码出现了很多<code>useState</code>、<code>useEffect</code>、<code>useMemo</code>等hook，我们需要考虑把它封装成一个自定义的hook<br>比如一个product的<code>state</code>，一个获取商品的<code>effect</code>，一个获取商品的请求，可以把这三个封装在一个<code>useProduct</code>中，这样就拆分出了第一个功能–获取商品列表</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">useProducts</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [products, setProducts] = useState&lt;<span class="built_in">any</span>[]&gt;([]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">fetchProducts</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">get</span>(</span><br><span class="line">      <span class="string">&quot;https://fakestoreapi.com/products&quot;</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (response &amp;&amp; response.<span class="property">data</span>) <span class="title function_">setProducts</span>(response.<span class="property">data</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">fetchProducts</span>();</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; products &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="组件拆分"><a href="#组件拆分" class="headerlink" title="组件拆分"></a>组件拆分</h3><p>jsx中有两部分，一个是商品的展示，另一个是星级筛选器的展示。</p><p>商品展示部分可以拆分为<code>Product.tsx</code>，这样就拆分出了第二个功能–展示商品列表</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useMutation, useQueryClient &#125; <span class="keyword">from</span> <span class="string">&quot;@tanstack/react-query&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&quot;styled-components&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IProduct</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">price</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">rating</span>: &#123; <span class="attr">rate</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line">  <span class="attr">image</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IProductProps</span> &#123;</span><br><span class="line">  <span class="attr">product</span>: <span class="title class_">IProduct</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Product</span>(<span class="params">props: IProductProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; product &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> &#123; id, title, price, rating, image &#125; = product;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;w-56 flex flex-col items-center m-2 max-w-sm bg-white rounded-lg shadow-md dark:bg-gray-800 dark:border-gray-700&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&quot;p-8 rounded-t-lg h-48&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">src</span>=<span class="string">&#123;image&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">alt</span>=<span class="string">&quot;product image&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col px-5 pb-5&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h5</span> <span class="attr">className</span>=<span class="string">&quot;text-lg font-semibold tracking-tight text-gray-900 dark:text-white&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;title&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex items-center mt-2.5 mb-5 flex-1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;Array(Math.trunc(rating.rate))</span></span><br><span class="line"><span class="language-xml">            .fill(&quot;&quot;)</span></span><br><span class="line"><span class="language-xml">            .map((_, idx) =&gt; (</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">svg</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">className</span>=<span class="string">&quot;w-5 h-5 text-yellow-300&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">fill</span>=<span class="string">&quot;currentColor&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">viewBox</span>=<span class="string">&quot;0 0 20 20&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              &gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">title</span>&gt;</span>First star<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            ))&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;bg-blue-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800 ml-3&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;Math.trunc(rating.rate)&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col items-between justify-around&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;text-2xl font-bold text-gray-900 dark:text-white&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            $&#123;price&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">a</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">href</span>=<span class="string">&quot;#&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">className</span>=<span class="string">&quot;text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            // <span class="attr">onClick</span>=<span class="string">&#123;onAddToCart&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">            Add to cart</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>星级筛选器的UI部分可以拆分为<code>Filter.tsx</code>。</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Rating</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-simple-star-rating&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IFilterProps</span> &#123;</span><br><span class="line">  <span class="attr">filterRate</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">handleRating</span>: <span class="function">(<span class="params">rate: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Filter</span>(<span class="params">props: IFilterProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; filterRate, handleRating &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col justify-center items-center mb-4&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;font-semibold&quot;</span>&gt;</span>Minimum Rating <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Rating</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">initialValue</span>=<span class="string">&#123;filterRate&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">SVGclassName</span>=<span class="string">&quot;inline-block&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;handleRating&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>按星级过滤，有一个filterRate的<code>state</code>，一个设置filterRate值的方法<code>handleRating</code>，这些可以封装为1个自定义的<code>useFilterRate</code>中。上面的组件加上这个hook就拆分出了第三个功能–星级评价。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useRateFilter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [filterRate, setFilterRate] = <span class="title function_">useState</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleRating</span> = (<span class="params">rate: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setFilterRate</span>(rate);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; filterRate, handleRating &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>按星级筛选商品仅需要一个方法</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">filterProducts</span>(<span class="params">products: <span class="built_in">any</span>[], rate: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> products.<span class="title function_">filter</span>(</span><br><span class="line">    <span class="function">(<span class="params">product: <span class="built_in">any</span></span>) =&gt;</span> product.<span class="property">rating</span>.<span class="property">rate</span> &gt; rate</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将所有代码组合起来</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useMemo, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Product</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./product&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Rating</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-simple-star-rating&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Filter</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./filter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useProducts &#125; <span class="keyword">from</span> <span class="string">&quot;./hooks/useProducts&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRateFilter &#125; <span class="keyword">from</span> <span class="string">&quot;./hooks/useRateFilter&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">filterProducts</span>(<span class="params">products: <span class="built_in">any</span>[], rate: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> products.<span class="title function_">filter</span>(</span><br><span class="line">    <span class="function">(<span class="params">product: <span class="built_in">any</span></span>) =&gt;</span> product.<span class="property">rating</span>.<span class="property">rate</span> &gt; rate</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Good</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; products &#125; = <span class="title function_">useProducts</span>();</span><br><span class="line">  <span class="keyword">const</span> &#123; filterRate, handleRating &#125; = <span class="title function_">useRateFilter</span>();</span><br><span class="line">  <span class="keyword">const</span> filteredProducts = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span> <span class="title function_">filterProducts</span>(products, filterRate),</span><br><span class="line">    [products, filterRate]</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col h-full&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Filter</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">filterRate</span>=<span class="string">&#123;filterRate</span> <span class="attr">as</span> <span class="attr">number</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">handleRating</span>=<span class="string">&#123;handleRating&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;h-full flex flex-wrap justify-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;filterProducts(products, filterRate).map((product: any) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Product</span> <span class="attr">product</span>=<span class="string">&#123;product&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="开闭原则"><a href="#开闭原则" class="headerlink" title="开闭原则"></a>开闭原则</h2><p>这四个字组合起来，让人看上去一脸懵，基本意思是<em>类&#x2F;组件允许被扩展，不能被修改</em>，即开放扩展，关闭修改。</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">HiOutlineArrowNarrowRight</span>,</span><br><span class="line">  <span class="title class_">HiOutlineArrowNarrowLeft</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-icons/hi&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IButtonProps</span></span><br><span class="line">  <span class="keyword">extends</span> <span class="title class_">React</span>.<span class="title class_">ButtonHTMLAttributes</span>&lt;<span class="title class_">HTMLButtonElement</span>&gt; &#123;</span><br><span class="line">  <span class="attr">text</span>: <span class="built_in">string</span>;</span><br><span class="line">  role?: <span class="string">&quot;back&quot;</span> | <span class="string">&quot;forward&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">props: IButtonProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; text, role, icon &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;flex items-center font-bold outline-none pt-4 pb-4 pl-8 pr-8 rounded-xl bg-gray-200 text-black&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#123;<span class="attr">...props</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;text&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;m-2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;role === &quot;forward&quot; &amp;&amp; <span class="tag">&lt;<span class="name">HiOutlineArrowNarrowRight</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;role === &quot;back&quot; &amp;&amp; <span class="tag">&lt;<span class="name">HiOutlineArrowNarrowLeft</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个按钮只实现乐前进样式和返回样式，如果要再加一个搜索样式，那就需要在<code>Button</code>组件的源码中修改，这不符合开闭原则。</p><p>修改后</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">HiOutlineArrowNarrowRight</span>,</span><br><span class="line">  <span class="title class_">HiOutlineArrowNarrowLeft</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-icons/hi&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IButtonProps</span></span><br><span class="line">  <span class="keyword">extends</span> <span class="title class_">React</span>.<span class="title class_">ButtonHTMLAttributes</span>&lt;<span class="title class_">HTMLButtonElement</span>&gt; &#123;</span><br><span class="line">  <span class="attr">text</span>: <span class="built_in">string</span>;</span><br><span class="line">  icon?: <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">props: IButtonProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; text, role, icon &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;flex items-center font-bold outline-none pt-4 pb-4 pl-8 pr-8 rounded-xl bg-gray-200 text-black&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#123;<span class="attr">...props</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;text&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;m-2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;icon&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个按钮支持任何的icon，而不仅仅是<code>back</code>和<code>forward</code></p><h2 id="里氏替换"><a href="#里氏替换" class="headerlink" title="里氏替换"></a>里氏替换</h2><p>意思就是，你的组件如果扩展了原生组件，那就要继承原生组件的api，比如你封装了一个input输入框，原生input有好多属性，那就应该继承，而且不要改名。</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cx <span class="keyword">from</span> <span class="string">&quot;clsx&quot;</span>;</span><br><span class="line"><span class="comment">// 继承了原生input的所有属性</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ISearchInputProps</span></span><br><span class="line">  <span class="keyword">extends</span> <span class="title class_">React</span>.<span class="title class_">InputHTMLAttributes</span>&lt;<span class="title class_">HTMLInputElement</span>&gt; &#123;</span><br><span class="line">  isLarge?: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">SearchInput</span>(<span class="params">props: ISearchInputProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; value, onChange, isLarge, ...restProps &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex w-10/12&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;relative w-full&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">svg</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">className</span>=<span class="string">&quot;w-5 h-5 text-gray-500 dark:text-gray-400&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">path</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">strokeLinecap</span>=<span class="string">&quot;round&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">strokeLinejoin</span>=<span class="string">&quot;round&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">strokeWidth</span>=<span class="string">&quot;2&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">d</span>=<span class="string">&quot;M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;search&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">id</span>=<span class="string">&quot;default-search&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&#123;cx(</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &quot;<span class="attr">block</span> <span class="attr">p-4</span> <span class="attr">pl-10</span> <span class="attr">w-full</span> <span class="attr">text-sm</span> <span class="attr">text-gray-900</span> <span class="attr">bg-gray-50</span> <span class="attr">rounded-lg</span> <span class="attr">border</span> <span class="attr">border-gray-300</span> <span class="attr">focus:ring-blue-500</span> <span class="attr">focus:border-blue-500</span> <span class="attr">dark:bg-gray-700</span> <span class="attr">dark:border-gray-600</span> <span class="attr">dark:placeholder-gray-400</span> <span class="attr">dark:text-white</span> <span class="attr">dark:focus:ring-blue-500</span> <span class="attr">dark:focus:border-blue-500</span> <span class="attr">outline-none</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">isLarge</span> &amp;&amp; &quot;<span class="attr">text-3xl</span>&quot;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          )&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">placeholder</span>=<span class="string">&quot;Search for the right one...&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">required</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;value&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;onChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123;<span class="attr">...restProps</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="接口分离"><a href="#接口分离" class="headerlink" title="接口分离"></a>接口分离</h2><p>意思是你的组件中不要定义无意义、无用处的属性，包括嵌套的属性</p><h3 id="反面案例-1"><a href="#反面案例-1" class="headerlink" title="反面案例"></a>反面案例</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">IProduct</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./product&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IThumbnailProps</span> &#123;</span><br><span class="line">  <span class="attr">product</span>: <span class="title class_">IProduct</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Thumbnail</span>(<span class="params">props: IThumbnailProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; product &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;p-8 rounded-t-lg h-48&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&#123;product.imageUrl&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;product image&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>product中有很多属性，但是只用到了<code>imageUrl</code>一个，别人用的时候会很奇怪，我要展示一个缩略图，为什么要传一个商品进去。</p><p>修改后</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">IProduct</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./product&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IThumbnailProps</span> &#123;</span><br><span class="line">  <span class="attr">imageUrl</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Thumbnail</span>(<span class="params">props: IThumbnailProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; imageUrl &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;p-8 rounded-t-lg h-48&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&#123;imageUrl&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;product image&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="依赖倒转"><a href="#依赖倒转" class="headerlink" title="依赖倒转"></a>依赖倒转</h2><p>意思就是，你的组件中如果有某些需要主动触发的操作，应该暴露处一个接口。<br>react基本都是这样得，这个大部分人都会做，比如<code>Button</code>的<code>onClick</code>，<code>Form</code>的<code>onSubmit</code>等</p><p>文章代码来自<a href="https://github.com/ipenywis/react-solid/tree/main/src/principles">github</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;没有组件封装的react，一定是屎山代码。&lt;br&gt;react组件五个原则&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Single Responsibility 单一职责&lt;/li&gt;
&lt;li&gt;Open-Closed 开闭原则&lt;/li&gt;
&lt;li&gt;Liskov Subsitution 里氏替换&lt;/li&gt;
&lt;li&gt;Interface Segregation 接口分离&lt;/li&gt;
&lt;li&gt;Dependency Inversion 依赖倒转&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="前端" scheme="https://www.ryanamigo.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="react" scheme="https://www.ryanamigo.com/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>使用docker开饥荒联机版服务器</title>
    <link href="https://www.ryanamigo.com/2023/07/06/dst-server/"/>
    <id>https://www.ryanamigo.com/2023/07/06/dst-server/</id>
    <published>2023-07-06T14:42:20.000Z</published>
    <updated>2023-11-20T00:48:58.532Z</updated>
    
    <content type="html"><![CDATA[<h2 id="选择镜像"><a href="#选择镜像" class="headerlink" title="选择镜像"></a>选择镜像</h2><p>目前持续更新，并且稳定的镜像是<a href="https://hub.docker.com/r/jamesits/dst-server">jamesits提供的镜像</a>，详细文档可访问<a href="https://github.com/Jamesits/docker-dst-server">github</a>。</p><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h3><p>使用普通的docker-run命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v ./DoNotStarveTogether:/data -d -p 10999-11000:10999-11000/udp -p 12346-12347:12346-12347/udp -e &quot;DST_SERVER_ARCH=amd64&quot; -it jamesits/dst-server:latest</span><br></pre></td></tr></table></figure><ul><li><code>-v</code>的意思是将本机的当前目录下的<code>DoNotStarveTogether</code>文件夹映射到docker容器中，这样把容器删除后也不会丢失数据</li><li><code>-p</code>的意思是将本机的10999 11000 12346 12347这4个udp端口映射到容器对应的端口</li><li><code>-e</code>的意思是设置容器启动的环境变量，即amd64架构</li><li><code>it</code>的意思是以交互模式运行容器(i)，并为容器重新分配一个伪输入终端(t)</li></ul><p>建议把命令写在一个文件中，方便执行，例如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;docker run -v ./DoNotStarveTogether:/data -d -p 10999-11000:10999-11000/udp -p 12346-12347:12346-12347/udp -e &quot;DST_SERVER_ARCH=amd64&quot; -it jamesits/dst-server:latest&quot; &gt;&gt; start.sh</span><br><span class="line">chmod +x ./start.sh</span><br></pre></td></tr></table></figure><p>之后执行 <code>./start.sh</code>即可</p><span id="more"></span><h3 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h3><p><a href="https://github.com/Jamesits/docker-dst-server">jamesits</a>提供了docker-compose配置，可直接使用，这样更方便与服务器上的其他容器一起管理</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.5&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">dst-server:</span></span><br><span class="line">     <span class="attr">image:</span> <span class="string">jamesits/dst-server:latest</span></span><br><span class="line">     <span class="attr">restart:</span> <span class="string">&quot;on-failure:5&quot;</span></span><br><span class="line">     <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;10999-11000:10999-11000/udp&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;12346-12347:12346-12347/udp&quot;</span></span><br><span class="line">     <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">~/.klei/DoNotStarveTogether:/data</span></span><br><span class="line">     <span class="attr">stop_grace_period:</span> <span class="string">6m</span></span><br></pre></td></tr></table></figure><h2 id="服务配置"><a href="#服务配置" class="headerlink" title="服务配置"></a>服务配置</h2><p>容器启动后会看到多了一个目录<code>DontStarveTogether</code></p><h3 id="token"><a href="#token" class="headerlink" title="token"></a>token</h3><p>饥荒开服需要从Klei获取自己账号的token，获取地址在<a href="https://accounts.klei.com/account/game/servers?game=DontStarveTogether">这里</a><br><img src="http://oss.ryanamigo.com/blog/dst-1.jpg"><br>获取到token后，将token放到<code>./DoNotStarveTogether/DoNotStarveTogether/Cluster_1/cluster_token.txt</code>文件中</p><h3 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h3><p><code>cluster.ini</code>配置了服务器的基本信息</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">; Here is all the server configs you will ever want to change</span></span><br><span class="line"><span class="section">[NETWORK]</span></span><br><span class="line"><span class="comment">; DO change the name and description please!</span></span><br><span class="line"><span class="attr">cluster_name</span> = xxxx</span><br><span class="line"><span class="attr">cluster_description</span> = xxxxxx</span><br><span class="line"><span class="attr">cluster_password</span> = axxxx111111</span><br><span class="line"><span class="comment">; 最好把这个加上，要不人物说的都是英文</span></span><br><span class="line"><span class="attr">cluster_language</span> = zh</span><br><span class="line"><span class="attr">offline_cluster</span> = <span class="literal">false</span></span><br><span class="line"><span class="attr">lan_only_cluster</span> = <span class="literal">false</span></span><br><span class="line"><span class="attr">whitelist_slots</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">cluster_intention</span> = social</span><br><span class="line"><span class="attr">autosaver_enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment">;tick_rate = 30</span></span><br><span class="line"></span><br><span class="line"><span class="section">[GAMEPLAY]</span></span><br><span class="line"><span class="attr">game_mode</span> = endless</span><br><span class="line"><span class="attr">max_players</span> = <span class="number">8</span></span><br><span class="line"><span class="attr">pvp</span> = <span class="literal">false</span></span><br><span class="line"><span class="attr">pause_when_empty</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">vote_kick_enabled</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="section">[STEAM]</span></span><br><span class="line"><span class="attr">steam_group_only</span> = <span class="literal">false</span></span><br><span class="line"><span class="attr">steam_group_id</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">steam_group_admins</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="section">[MISC]</span></span><br><span class="line"><span class="attr">console_enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">max_snapshots</span> = <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; ====================================================================</span></span><br><span class="line"><span class="comment">; STOP! Don&#x27;t change configs below unless you know what you are doing.</span></span><br><span class="line"><span class="comment">; ====================================================================</span></span><br><span class="line"><span class="section">[SHARD]</span></span><br><span class="line"><span class="attr">shard_enabled</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">bind_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">master_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">master_port</span> = <span class="number">10998</span></span><br><span class="line"><span class="attr">cluster_key</span> = xxxxxx</span><br></pre></td></tr></table></figure><p>最好在<code>NETWORK</code>中加上<code>cluster_language = zh</code>，要不人物说的都是英文。更多配置见下方附录</p><h3 id="管理员"><a href="#管理员" class="headerlink" title="管理员"></a>管理员</h3><p>你的Token中，两个<code>^</code>符号中间就是你的Klei账号id，在<code>adminlist.txt</code>中粘贴Klei账号id即可(不要带上^)</p><h2 id="mod配置"><a href="#mod配置" class="headerlink" title="mod配置"></a>mod配置</h2><p>饥荒服务器使用mod有两个步骤</p><ol><li>添加&#x2F;下载mod</li><li>启用mod</li></ol><h3 id="添加-下载mod"><a href="#添加-下载mod" class="headerlink" title="添加&#x2F;下载mod"></a>添加&#x2F;下载mod</h3><p>在刚才的文件目录中，有一个<code>mods</code>目录，完整路径<code>./DoNotStarveTogether/DoNotStarveTogether/Cluster_1/mods</code>,这里有一个文件，<code>dedicated_server_mods_setup.lua</code>，这里配置需要下载的mod，例如</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 血条</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;1185229307&quot;</span>)</span><br><span class="line"><span class="comment">-- 防卡</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;2505341606&quot;</span>)</span><br><span class="line"><span class="comment">-- 智能小木牌</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;1595631294&quot;</span>)</span><br><span class="line"><span class="comment">-- 4/5/6格装备栏</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;2798599672&quot;</span>)</span><br><span class="line"><span class="comment">-- Show Me(中文)</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;2287303119&quot;</span>)</span><br><span class="line"><span class="comment">-- Global Positions</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;378160973&quot;</span>)</span><br><span class="line"><span class="comment">-- 人物 黎明卿-波多尔多</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;2865408620&quot;</span>)</span><br><span class="line"><span class="comment">-- 身在福中不知福</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;2543193992&quot;</span>)</span><br><span class="line"><span class="comment">-- fast travel</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;2119742489&quot;</span>)</span><br></pre></td></tr></table></figure><p>方法中的数字是mod的id，在创意工坊页面url的参数中<br><img src="http://oss.ryanamigo.com/blog/dst-2.jpg"><br>容器启动的时候会去下载这些mod</p><h3 id="启用mod"><a href="#启用mod" class="headerlink" title="启用mod"></a>启用mod</h3><p>启用mod的方式比较麻烦，需要写每个mod的配置,文件有两个，<br>DoNotStarveTogether&#x2F;DoNotStarveTogether&#x2F;Cluster_1&#x2F;Master&#x2F;modoverrides.lua (地面世界)<br>DoNotStarveTogether&#x2F;DoNotStarveTogether&#x2F;Cluster_1&#x2F;Caves&#x2F;modoverrides.lua (洞穴世界)</p><p>他们的大致结构是这样的</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">retrurn &#123;</span><br><span class="line">  [<span class="string">&quot;workshop-1185229307&quot;</span>]=&#123;</span><br><span class="line">    configuration_options=&#123;</span><br><span class="line">      <span class="comment">-- 这里是mod自己的配置，每个mod都不同</span></span><br><span class="line">    &#125;,</span><br><span class="line">    enabled=<span class="literal">true</span>  <span class="comment">-- 这里启用了mod</span></span><br><span class="line">  &#125;,</span><br><span class="line">  [<span class="string">&quot;workshop-1595631294&quot;</span>]=&#123;</span><br><span class="line">    configuration_options=&#123;</span><br><span class="line">      <span class="comment">-- 这里是mod自己的配置，每个mod都不同</span></span><br><span class="line">    &#125;,</span><br><span class="line">    enabled=<span class="literal">true</span>  <span class="comment">-- 这里启用了mod</span></span><br><span class="line">  &#125;, </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中 configuration_options中的配置我们是不知道的。<br>比较方便的做法是把mod在自己的电脑上启动，用自己的电脑开服找到上面的两个文件（windows系统的路径在 <code>文档/Klei/...</code>中，稍微找一下就找到了），复制内容，粘贴到服务器上。</p><p>两个都配置完成后，需要重启容器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用docker ps查看容器<span class="built_in">id</span>, 也就是CONTAINER ID下面的</span></span><br><span class="line">docker ps </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启容器</span></span><br><span class="line">docker restart 79ee0986e0ed</span><br></pre></td></tr></table></figure><p>启动时可以查看启动日志，<code>docker logs 79ee0986e0ed --tail 50 -f</code>，要关闭日志，使用<code>Ctrl C</code>即可</p><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>饥荒基本配置，cluster.ini文件的所有配置项<br>[GAMEPLAY]</p><ul><li><p>game_mode（游戏模式）</p><p>默认值： survival（生存）。</p><p>只有 survival（生存）、 endless（无尽） 、wilderness（荒野）这3种游戏模式。</p></li><li><p>max_players（最大人数）</p><p>默认值：16。</p><p>服务器内玩家同时在线的最大人数。</p></li><li><p>pvp（ pvp 模式）</p><p>默认值：false。</p><p>pvp 模式下，玩家可以互相伤害。</p></li><li><p>pause_when_empty</p><p>默认值：true。</p><p>服务器内没有玩家在线时，暂停服务器。</p></li></ul><p>[NETWORK]</p><ul><li><p>lan_only_cluster（局域网游戏）</p><p>默认值：false。</p><p>只允许同一个局域网中的玩家加入。</p></li><li><p>cluster_intention（游戏风格）</p><p>默认值：无。</p><p>只有 cooperative（合作）、 competitive（竞争）、social（社交）、madness（疯狂）这4种游戏风格，对游戏无任何影响。</p></li><li><p>cluster_password（服务器密码）</p><p>默认值：空。</p><p>服务器密码为空时，玩家加入不需要输入密码，否则需要输入密码。</p></li><li><p>cluster_description（服务器描述）</p><p>默认值：空。</p><p>服务器的描述。</p></li><li><p>cluster_name（服务器名）</p><p>默认值：无。</p><p>服务器的名字。</p></li><li><p>offline_cluster（离线）</p><p>默认值：false。</p><p>创建一个离线服务器，该服务器不会公开。只有本地网络上的玩家才能加入，任何与 Steam 相关的功能都将无法使用。</p></li><li><p>cluster_language（服务器语言）</p><p>默认值：无。</p><p>服务器内显示的语言。</p></li><li><p>whitelist_slots（白名单席位）</p><p>默认值：0。</p><p>为白名单玩家预留的空位，只有白名单玩家才能加入。</p></li></ul><p>[MISC]</p><ul><li><p>console_enabled（启用控制台）</p><p>默认值：true。</p><p>允许玩家在控制台中输入命令。</p></li></ul><p>[SHARD]</p><ul><li>shard_enabled（启用共享）</li></ul><p>默认值：false。</p><p>启用服务器共享。对于多层世界，值必须是 true。对于单层世界，值可以省略。</p><ul><li>bind_ip</li></ul><p>默认值：127.0.0.1。</p><p>这是 主世界 将侦听其他 从世界 连接到的网络地址。如果所有服务器都在同一台机器上，则将此设置为 127.0.0.1，如果服务器在不同的机器上，则将其设置为 0.0.0.0。</p><ul><li>master_ip（主 ip）</li></ul><p>默认值：无。</p><p>从世界 在尝试连接到 主世界 时将使用的 IP 地址。如果所有服务器都在同一台机器上，请将其设置为 127.0.0.1。如果所有服务器不在同一台机器上，请将其设置为 运行主世界的那台机器的公网 ip。</p><ul><li>master_port（主端口）</li></ul><p>默认值：10888。</p><p>这是 主世界 将侦听的 UDP 端口，从世界 在尝试连接到 主世界 时将使用该端口。所有的机器上的 master_port 必须保持一致，而且不能和同一台机器上的 server_port 相同。</p><ul><li>cluster_key（服务器认证密码）</li></ul><p>默认值：无。</p><p>主世界 验证 从世界 的密码。如果所有世界都在同一台机器上，则只需要设置一次。所有的世界运行在不同的机器上，值只能保持一致。</p><h3 id="控制台命令"><a href="#控制台命令" class="headerlink" title="控制台命令"></a>控制台命令</h3><p><code>c_give(“XX”, 10)</code>  –——直接把10个xx放包里<br><code>c_spawn(“XX”，10)</code> ——把10个xx放鼠标指针指示的地上<br><code>TheInput:GetWorldEntityUnderMouse():Remove()</code> 删除鼠标指着的物品</p><h2 id="物品代码"><a href="#物品代码" class="headerlink" title="物品代码"></a>物品代码</h2><h3 id="材料"><a href="#材料" class="headerlink" title="材料"></a>材料</h3><p>cutgrass 草</p><p>twigs 树枝</p><p>log 木头</p><p>charcoal 木炭</p><p>ash 灰</p><p>cutreeds 采下的芦苇</p><p>lightbulb 荧光果</p><p>petals 花瓣</p><p>petals_evil 噩梦花瓣</p><p>pinecone 松果</p><p>foliage 叶子</p><p>cutlichen 摘下的苔藓</p><p>wormlight 虫子果</p><p>lureplantbulb 食人花种子</p><p>flint 燧石</p><p>nitre 硝石</p><p>redgem 红宝石</p><p>bluegem 蓝宝石</p><p>purplegem 紫宝石</p><p>greengem 绿宝石</p><p>orangegem 橙宝石</p><p>yellowgem 黄宝石</p><p>rocks 岩石</p><p>goldnugget 黄金</p><p>thulecite 铥矿石</p><p>thulecite_pieces 铥矿碎片</p><p>rope 绳子</p><p>boards 木板</p><p>cutstone 石砖</p><p>papyrus 纸</p><p>houndstooth 犬牙</p><p>pigskin 猪皮</p><p>manrabbit_tail 兔人尾巴</p><p>silk 蜘蛛丝</p><p>spidergland 蜘蛛腺体</p><p>spidereggsack 蜘蛛卵</p><p>beardhair 胡子</p><p>beefalowool 牛毛</p><p>honeycomb 蜂巢</p><p>stinger 蜂刺</p><p>walrus_tusk 海象牙</p><p>feather_crow 乌鸦羽毛</p><p>feather_robin 红雀羽毛</p><p>feather_robin_winter 雪雀羽毛</p><p>horn 牛角</p><p>tentaclespots 触手皮</p><p>trunk_summer 夏象鼻</p><p>trunk_winter 冬象鼻</p><p>slurtleslime 蜗牛龟粘液</p><p>slurtle_shellpieces 蜗牛龟壳片</p><p>butterflywings 蝴蝶翅膀</p><p>mosquitosack 蚊子血囊</p><p>slurper_pelt 啜食者皮</p><h3 id="工具-武器"><a href="#工具-武器" class="headerlink" title="工具&#x2F;武器"></a>工具&#x2F;武器</h3><p>minotaurhorn 远古守护者角</p><p>deerclops_eyeball 巨鹿眼球</p><p>lightninggoathorn 闪电羊角</p><p>glommerwings 格罗门翅膀</p><p>glommerflower 格罗门花</p><p>glommerfuel 格罗门燃料</p><p>livinglog 活木头</p><p>nightmarefuel 噩梦燃料</p><p>gears 齿轮</p><p>transistor 晶体管</p><p>marble 大理石</p><p>boneshard 硬骨头</p><p>ice 冰</p><p>poop 便便</p><p>guano 鸟粪</p><p>dragon_scales 蜻蜓鳞片</p><p>goose_feather 鹿鸭羽毛</p><p>coontail 浣熊尾巴</p><p>bearger_fur 熊皮</p><p>axe 斧子</p><p>goldenaxe 黄金斧头</p><p>lucy 露西斧子</p><p>hammer 锤子</p><p>pickaxe 镐</p><p>goldenpickaxe 黄金镐</p><p>shovel 铲子</p><p>goldenshovel 黄金铲子</p><p>pitchfork 草叉</p><p>razor 剃刀</p><p>bugnet 捕虫网</p><p>fishingrod 鱼竿</p><p>multitool_axe_pickaxe 多功能工具</p><p>cane 行走手杖</p><p>trap 陷阱</p><p>birdtrap 鸟陷阱</p><p>trap_teeth 牙齿陷阱</p><p>trap_teeth_maxwell 麦斯威尔的牙齿陷阱</p><p>backpack 背包</p><p>piggyback 猪皮包</p><p>krampus_sack 坎普斯背包</p><p>umbrella 雨伞</p><p>grass_umbrella 草伞</p><p>heatrock 保温石</p><p>bedroll_straw 草席卷</p><p>bedroll_furry 毛皮铺盖</p><p>torch 火炬</p><p>lantern 提灯</p><p>pumpkin_lantern 南瓜灯</p><p>compass 指南针</p><p>fertilizer 化肥</p><p>firesuppressor 灭火器</p><p>sewing_kit 缝纫工具包</p><p>spear 矛</p><p>boomerang 回旋镖</p><p>tentaclespike 狼牙棒</p><p>blowdart_pipe 吹箭</p><p>blowdart_sleep 麻醉吹箭</p><p>blowdart_fire 燃烧吹箭</p><p>hambat 火腿短棍</p><p>nightsword 暗影剑</p><p>batbat 蝙蝠棒</p><p>ruins_bat 远古短棒</p><p>spear_wathgrithr 瓦丝格雷斯矛</p><p>panflute 排箫</p><p>onemanband 独奏乐器</p><p>gunpowder 火药</p><p>beemine 蜜蜂地雷</p><p>bell 铃</p><p>amulet 红色护身符</p><p>blueamulet 蓝色护身符</p><p>purpleamulet 紫色护身符</p><p>yellowamulet 黄色护身符</p><p>orangeamulet 橙色护身符</p><p>greenamulet 绿色护身符</p><p>nightmare_timepiece 铥矿奖章</p><p>icestaff 冰魔杖</p><p>firestaff 火魔杖</p><p>telestaff 传送魔杖</p><p>orangestaff 橙色魔杖</p><h3 id="装备"><a href="#装备" class="headerlink" title="装备"></a>装备</h3><p>strawhat 草帽</p><p>flowerhat 花环</p><p>greenstaff 绿色魔杖</p><p>yellowstaff 黄色魔杖</p><p>diviningrod 探矿杖</p><p>book_birds 召唤鸟的书</p><p>book_tentacles 召唤触手的书</p><p>book_gardening 催生植物的书</p><p>book_sleep 催眠的书</p><p>book_brimstone 召唤闪电的书</p><p>waxwelljournal 麦斯威尔的日志</p><p>abigail_flower 阿比盖尔之花</p><p>balloons_empty 空气球</p><p>balloon 气球</p><p>lighter 薇洛的打火机</p><p>chester_eyebone 切斯特骨眼</p><p>featherfan 羽毛扇</p><p>staff_tornado 龙卷风魔杖</p><p>nightstick 夜棍</p><p>beefalohat 牛毛帽</p><p>featherhat 羽毛帽</p><p>footballhat 猪皮帽</p><p>tophat 高礼帽</p><p>earmuffshat 兔耳罩</p><p>winterhat 冬帽</p><p>minerhat 矿工帽</p><p>spiderhat 蜘蛛帽</p><p>beehat 蜂帽</p><p>walrushat 海象帽</p><p>slurtlehat 蜗牛帽子</p><p>bushhat 丛林帽</p><p>ruinshat 远古王冠</p><p>rainhat 防雨帽</p><p>icehat 冰帽</p><p>watermelonhat 西瓜帽</p><p>catcoonhat 浣熊帽</p><p>wathgrithrhat 瓦丝格雷斯帽</p><p>armorwood 木盔甲</p><h3 id="建筑"><a href="#建筑" class="headerlink" title="建筑"></a>建筑</h3><p>campfire 营火</p><p>firepit 石头营火</p><p>armorgrass 草盔甲</p><p>armormarble 大理石盔甲</p><p>armor_sanity 夜魔盔甲</p><p>armorsnurtleshell 蜗牛龟盔甲</p><p>armorruins 远古盔甲</p><p>sweatervest 小巧背心</p><p>trunkvest_summer 夏日背心</p><p>trunkvest_winter 寒冬背心</p><p>armorslurper 饥饿腰带</p><p>raincoat 雨衣</p><p>webberskull 韦伯头骨</p><p>molehat 鼹鼠帽</p><p>armordragonfly 蜻蜓盔甲</p><p>beargervest 熊背心</p><p>eyebrellahat 眼睛帽</p><p>reflectivevest 反射背心</p><p>hawaiianshirt 夏威夷衬衫</p><p>coldfire 冷火</p><p>coldfirepit 石头冷火</p><p>cookpot 锅</p><p>icebox 冰箱</p><p>winterometer 寒冰温度计</p><p>rainometer 雨量计</p><p>slow_farmplot 一般农田</p><p>fast_farmplot 高级农田</p><p>siestahut 午睡小屋</p><p>tent 帐篷</p><p>homesign 路牌</p><p>birdcage 鸟笼</p><p>meatrack 晾肉架</p><p>lightning_rod 避雷针</p><p>pottedfern 盆栽</p><p>nightlight 暗夜照明灯</p><p>nightmarelight 影灯</p><p>researchlab 科学机器</p><p>researchlab2 炼金术引擎</p><p>researchlab3 阴影操纵者</p><p>researchlab4 灵子分解器</p><p>treasurechest 木箱</p><p>skullchest 骷髅箱</p><p>pandoraschest 华丽的箱子</p><p>minotaurchest 大华丽的箱子</p><p>wall_hay_item 草墙</p><p>wall_wood_item 木墙</p><p>wall_stone_item 石墙</p><p>wall_ruins_item 铥墙</p><p>wall_hay 地上的草墙</p><p>wall_wood 地上的木墙</p><p>wall_stone 地上的石墙</p><p>wall_ruins 地上的铥墙</p><p>pighouse 猪房</p><p>rabbithole 兔房</p><p>mermhouse 鱼人房</p><p>resurrectionstatue 肉块雕像</p><p>resurrectionstone 重生石</p><p>ancient_altar 远古祭坛</p><p>ancient_altar_broken 损坏的远古祭坛</p><p>telebase 传送核心</p><p>gemsocket 宝石看台</p><p>eyeturret 固定在地上的眼睛炮塔</p><p>eyeturret_item 可带走的眼睛炮塔</p><p>cave_exit 洞穴出口</p><p>turf_woodfloor 木地板</p><p>turf_carpetfloor 地毯地板</p><p>turf_checkerfloor 棋盘地板</p><p>adventure_portal 冒险之门</p><p>rock_light 火山坑</p><p>gravestone 墓碑</p><p>mound 坟墓土堆</p><p>skeleton 人骨</p><p>houndbone 狗骨头</p><p>animal_track 动物足迹</p><p>dirtpile 可疑的土堆</p><p>pond 池塘</p><p>pond_cave 洞穴池塘</p><p>pighead 猪头棍</p><p>mermhead 鱼头棍</p><p>pigtorch 猪火炬</p><p>rabbithole 兔子洞</p><p>beebox 蜂箱</p><p>beehive 野生蜂窝</p><p>wasphive 杀人蜂窝</p><p>spiderhole 洞穴蜘蛛洞</p><p>walrus_camp 海象窝</p><p>tallbirdnest 高鸟窝</p><p>houndmound 猎犬丘</p><p>slurtlehole 蜗牛窝</p><p>batcave 蝙蝠洞</p><p>monkeybarrel 猴子桶</p><p>spiderden 蜘蛛巢穴</p><p>molehill 鼹鼠丘</p><p>catcoonden 浣熊洞</p><p>rock1 带硝石的岩石</p><p>rock2 带黄金的岩石</p><p>rock_flintless 只有石头的岩石</p><p>stalagmite_full 大圆洞穴石头</p><p>stalagmite_med 中圆洞穴石头</p><p>stalagmite_low 小圆洞穴石头</p><p>stalagmite_tall_full 大高洞穴石头</p><p>stalagmite_tall_med 中高洞穴石头</p><p>stalagmite_tall_low 小高洞穴石头</p><p>rock_ice 冰石</p><p>ruins_statue_head 远古头像</p><p>ruins_statue_mage 远古法师雕像</p><p>marblepillar 大理石柱子</p><p>marbletree 大理石树</p><p>statueharp 竖琴雕像</p><p>basalt 玄武岩</p><p>basalt_pillar 高玄武岩</p><p>insanityrock 猪王矮柱石</p><p>sanityrock 猪王高柱石</p><p>ruins_chair 远古椅子</p><p>ruins_vase 远古花瓶</p><p>ruins_table 远古桌子</p><p>statuemaxwell 麦斯威尔雕像</p><p>statueglommer 格罗门雕像</p><p>relic 废墟</p><p>ruins_rubble 损毁的废墟</p><p>bishop_nightmare 损坏的雕像</p><p>rook_nightmare 损坏的战车</p><p>knight_nightmare 损坏的骑士</p><p>chessjunk1 损坏的机械1</p><p>chessjunk2 损坏的机械2</p><h3 id="食物"><a href="#食物" class="headerlink" title="食物"></a>食物</h3><p>carrot 胡萝卜</p><p>chessjunk3 损坏的机械3</p><p>teleportato_ring 环状传送机零件</p><p>teleportato_box 盒状传送机零件</p><p>teleportato_crank 曲柄状传送机零件</p><p>teleportato_potato 球状传送机零件</p><p>teleportato_base 传送机零件底座</p><p>teleportato_checkmate 传送机零件底座</p><p>wormhole 虫洞</p><p>wormhole_limited_1 被限制的虫洞</p><p>stafflight 小星星</p><p>treasurechest_trap 箱子陷阱</p><p>icepack 冰包</p><p>dragonflychest 蜻蜓箱子</p><p>carrot_cooked 熟胡萝卜</p><p>cookedmonstermeat 熟疯肉</p><p>monstermeat_dried 干疯肉</p><p>plantmeat 食人花肉</p><p>plantmeat_cooked 熟食人花肉</p><p>honey 蜂蜜</p><p>butter 黄油</p><p>butterflymuffin 奶油松饼</p><p>frogglebunwich 青蛙圆面包三明</p><p>bird_egg 鸡蛋</p><p>bird_egg_cooked 煮熟的鸡蛋</p><p>rottenegg 烂鸡蛋</p><p>tallbirdegg 高鸟蛋</p><p>tallbirdegg_cooked 熟高鸟蛋</p><p>tallbirdegg_cracked 孵化的高鸟蛋</p><p>fish 鱼</p><p>fish_cooked 熟鱼</p><p>eel 鳗鱼</p><p>eel_cooked 熟鳗鱼</p><p>froglegs 蛙腿</p><p>froglegs_cooked 熟蛙腿</p><p>batwing 蝙蝠翅膀</p><p>batwing_cooked 熟蝙蝠翅膀</p><p>trunk_cooked 熟象鼻</p><p>mandrake 曼德拉草</p><p>cookedmandrake 熟曼特拉草</p><p>honeyham 蜜汁火腿</p><p>dragonpie 龙馅饼</p><p>taffy 太妃糖</p><p>pumpkincookie 南瓜饼</p><p>kabobs 肉串</p><p>powcake 芝士蛋糕</p><p>mandrakesoup 曼德拉草汤</p><p>baconeggs 鸡蛋火腿</p><p>bonestew 肉汤</p><p>perogies 半圆小酥饼</p><p>wetgoop 湿腻焦糊</p><p>ratatouille 蹩脚的炖菜</p><p>fruitmedley 水果拼盘</p><p>fishtacos 玉米饼包炸鱼</p><p>waffles 华夫饼</p><p>turkeydinner 火鸡正餐</p><p>fishsticks 鱼肉条</p><p>stuffedeggplant 香酥茄盒</p><p>honeynuggets 甜蜜金砖</p><p>meatballs 肉丸</p><p>jammypreserves 果酱蜜饯</p><p>monsterlasagna 怪物千层饼</p><p>unagi 鳗鱼料理</p><p>bandage 蜂蜜绷带</p><p>healingsalve 治疗药膏</p><p>carrot 胡萝卜</p><p>chessjunk3 损坏的机械3</p><p>teleportato_ring 环状传送机零件</p><p>teleportato_box 盒状传送机零件</p><p>teleportato_crank 曲柄状传送机零件</p><p>teleportato_potato 球状传送机零件</p><p>teleportato_base 传送机零件底座</p><p>teleportato_checkmate 传送机零件底座</p><p>wormhole 虫洞</p><p>wormhole_limited_1 被限制的虫洞</p><p>stafflight 小星星</p><p>treasurechest_trap 箱子陷阱</p><p>icepack 冰包</p><p>dragonflychest 蜻蜓箱子</p><p>carrot_cooked 熟胡萝卜</p><p>cave_banana_tree 洞穴香蕉树</p><p>mushtree_small 小蘑菇树</p><p>livingtree 活树</p><p>deciduoustree 橡树</p><p>deciduoustree_tall 高橡树</p><p>deciduoustree_short 矮橡树</p><p>red_mushroom 红蘑菇</p><p>green_mushroom 绿蘑菇</p><p>blue_mushroom 蓝蘑菇</p><p>mushtree_tall 高蘑菇树</p><p>mushtree_medium 中蘑菇树</p><h3 id="植物"><a href="#植物" class="headerlink" title="植物"></a>植物</h3><p>flower 花</p><p>flower_evil 噩梦花</p><p>carrot_planted 长在地上的胡萝卜</p><p>grass 长在地上的草</p><p>depleted_grass 草根</p><p>dug_grass 长草簇</p><p>sapling 树苗</p><p>dug_sapling 可种的树苗</p><p>berrybush 果树丛</p><p>dug_berrybush 可种的果树丛</p><p>spoiled_food 腐烂食物</p><p>flowersalad 花沙拉</p><p>icecream 冰激淋</p><p>watermelonicle 西瓜冰</p><p>trailmix 干果</p><p>hotchili 咖喱</p><p>guacamole 鳄梨酱</p><p>goatmilk 羊奶</p><p>berrybush2 果树丛2</p><p>dug_berrybush2 可种的果树丛2</p><p>marsh_bush 尖刺灌木</p><p>dug_marsh_bush 可种的尖刺灌木</p><p>reeds 芦苇</p><p>lichen 洞穴苔藓</p><p>cave_fern 蕨类植物</p><p>evergreen 树</p><p>evergreen_sparse 无松果的树</p><p>marsh_tree 针叶树</p><p>marbletree 大理石树</p><p>statueharp 竖琴雕像</p><p>basalt 玄武岩</p><p>basalt_pillar 高玄武岩</p><p>insanityrock 猪王矮柱石</p><p>sanityrock 猪王高柱石</p><p>ruins_chair 远古椅子</p><p>ruins_vase 远古花瓶</p><p>ruins_table 远古桌子</p><p>statuemaxwell 麦斯威尔雕像</p><p>statueglommer 格罗门雕像</p><p>relic 废墟</p><p>ruins_rubble 损毁的废墟</p><p>bishop_nightmare 损坏的雕像</p><p>rook_nightmare 损坏的战车</p><p>knight_nightmare 损坏的骑士</p><p>chessjunk1 损坏的机械1</p><p>chessjunk2 损坏的机械2</p><h3 id="动物"><a href="#动物" class="headerlink" title="动物"></a>动物</h3><p>rabbit 兔子</p><p>perd 火鸡</p><p>crow 乌鸦</p><p>robin 红雀</p><p>robin_winter 雪雀</p><p>butterfly 蝴蝶</p><p>fireflies 萤火虫</p><p>bee 蜜蜂</p><p>killerbee 杀人蜂</p><p>flower_cave 单朵洞穴花</p><p>flower_cave_double 双朵洞穴花</p><p>flower_cave_triple 三朵洞穴花</p><p>tumbleweed 滚草</p><p>cactus 仙人掌</p><p>cactus_flower 仙人掌花</p><p>marsh_plant 水塘边小草</p><p>pond_algae 水藻</p><p>flies 苍蝇</p><p>mosquito 蚊子</p><p>frog 青蛙</p><p>beefalo 牛</p><p>babybeefalo 小牛</p><p>lightninggoat 闪电羊</p><p>pigman 猪人</p><p>pigguard 猪守卫</p><p>bunnyman 兔人</p><p>merm 鱼人</p><p>spider_hider 洞穴蜘蛛</p><p>spider_spitter 喷射蜘蛛</p><p>spider 地面小蜘蛛</p><p>spider_warrior 地面绿蜘蛛</p><p>spiderqueen 蜘蛛女王</p><p>spider_dropper 白蜘蛛</p><p>hound 猎狗</p><p>firehound 红色猎狗</p><p>icehound 冰狗</p><p>tentacle 触手</p><p>tentacle_garden 巨型触手</p><p>leif 树精</p><p>leif_sparse 稀有树精</p><p>walrus 海象</p><p>little_walrus 小海象</p><p>smallbird 小高鸟</p><p>teenbird 青年高鸟</p><p>tallbird 高鸟</p><p>worm 远古虫子</p><p>abigail 阿比盖尔</p><p>ghost 幽灵</p><p>koalefant_summer 夏象</p><p>koalefant_winter 冬象</p><p>penguin 企鹅</p><p>slurtle 蜗牛龟</p><p>snurtle 黏糊虫</p><p>bat 蝙蝠</p><p>rocky 龙虾</p><p>monkey 猴子</p><p>slurper 缀食者</p><p>buzzard 秃鹫</p><p>mole 鼹鼠</p><p>catcoon 浣熊</p><p>knight 发条骑士</p><p>bishop 主教</p><p>rook 战车</p><p>crawlinghorror 爬行暗影怪</p><p>terrorbeak 尖嘴暗影怪</p><p>deerclops 巨鹿</p><p>minotaur 远古守护者</p><p>shadowwaxwell 麦斯威尔黑影小人</p><p>krampus 坎普斯</p><p>glommer 格罗门</p><p>chester 切斯特</p><p>lureplant 食人花</p><p>eyeplant 食人花眼睛</p><p>bigfoot 大脚</p><p>pigking 猪王</p><p>moose 鹿鸭</p><p>mossling 小鸭</p><p>dragonfly 蜻蜓</p><p>warg 座狼</p><p>bearger 熊</p><p>birchnutdrake 坚果鸭</p><p>mooseegg 鹿鸭蛋</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;选择镜像&quot;&gt;&lt;a href=&quot;#选择镜像&quot; class=&quot;headerlink&quot; title=&quot;选择镜像&quot;&gt;&lt;/a&gt;选择镜像&lt;/h2&gt;&lt;p&gt;目前持续更新，并且稳定的镜像是&lt;a href=&quot;https://hub.docker.com/r/jamesits/dst-server&quot;&gt;jamesits提供的镜像&lt;/a&gt;，详细文档可访问&lt;a href=&quot;https://github.com/Jamesits/docker-dst-server&quot;&gt;github&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id=&quot;启动&quot;&gt;&lt;a href=&quot;#启动&quot; class=&quot;headerlink&quot; title=&quot;启动&quot;&gt;&lt;/a&gt;启动&lt;/h2&gt;&lt;h3 id=&quot;docker-run&quot;&gt;&lt;a href=&quot;#docker-run&quot; class=&quot;headerlink&quot; title=&quot;docker run&quot;&gt;&lt;/a&gt;docker run&lt;/h3&gt;&lt;p&gt;使用普通的docker-run命令&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker run -v ./DoNotStarveTogether:/data -d -p 10999-11000:10999-11000/udp -p 12346-12347:12346-12347/udp -e &amp;quot;DST_SERVER_ARCH=amd64&amp;quot; -it jamesits/dst-server:latest&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-v&lt;/code&gt;的意思是将本机的当前目录下的&lt;code&gt;DoNotStarveTogether&lt;/code&gt;文件夹映射到docker容器中，这样把容器删除后也不会丢失数据&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p&lt;/code&gt;的意思是将本机的10999 11000 12346 12347这4个udp端口映射到容器对应的端口&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-e&lt;/code&gt;的意思是设置容器启动的环境变量，即amd64架构&lt;/li&gt;
&lt;li&gt;&lt;code&gt;it&lt;/code&gt;的意思是以交互模式运行容器(i)，并为容器重新分配一个伪输入终端(t)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;建议把命令写在一个文件中，方便执行，例如&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;docker run -v ./DoNotStarveTogether:/data -d -p 10999-11000:10999-11000/udp -p 12346-12347:12346-12347/udp -e &amp;quot;DST_SERVER_ARCH=amd64&amp;quot; -it jamesits/dst-server:latest&amp;quot; &amp;gt;&amp;gt; start.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chmod +x ./start.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;之后执行 &lt;code&gt;./start.sh&lt;/code&gt;即可&lt;/p&gt;</summary>
    
    
    
    <category term="游戏" scheme="https://www.ryanamigo.com/categories/%E6%B8%B8%E6%88%8F/"/>
    
    
    <category term="饥荒" scheme="https://www.ryanamigo.com/tags/%E9%A5%A5%E8%8D%92/"/>
    
  </entry>
  
</feed>
